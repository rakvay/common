# commands from the book: Брэдшоу Ш., Брэзил Й., Ходоров К. - MongoDB. Полное руководство - 2020.pdf
mongo
********************
Однако мы также можем указать фильтр, который соответствует нескольким документам в коллекции. В этом случае метод deleteOne удалит
первый найденный документ, который соответствует фильтру. Какой документ будет найден первым, зависит от нескольких факторов, в том числе
от порядка, в котором были вставлены документы, того, какие обновления были внесены в них (для некоторых подсистем хранения), и того, какие ин-
дексы указаны. Как и при любой операции с базой данных, убедитесь, что вы знаете, как использование метода deleteOne повлияет на ваши данные.
Чтобы удалить все документы, которые соответствуют фильтру, используйте метод deleteMany
***********************
Модификатор "$set" устанавливает значение поля. Если поле еще не существует, оно будет создано
db.users.updateOne({"name" : "joe"},
... {"$set" : {"favorite book" : "Green Eggs and Ham"}})

удалить ключ с помощью "$unset":
> db.users.updateOne({"name" : "joe"},
... {"$unset" : {"favorite book" : 1}})
***********************
Оператор "$inc" можно использовать для изменения значения существующего ключа или для создания нового ключа, если он еще не существует.
 db.games.updateOne({"game" : "pinball", "user" : "joe"},
... {"$inc" : {"score" : 50}})
Кроме того, значение ключа "$inc" должно быть числом
***********************
Добавление элементов. Оператор "$push" добавляет элементы в конецмассива, если массив существует, и создает новый массив, если его нет.
 db.blog.posts.updateOne({"title" : "A blog post"},
... {"$push" : {"comments" :
...{"name" : "joe", "email" : "joe@example.com",
..."content" : "nice post."}}})
***********************
Если вы хотите рассматривать массив как очередь или стек,можно использовать оператор "$pop", который может удалять элементы с
любого конца. {"$pop" : {"key" : 1}} удаляет элемент из конца массива.
{"$pop" : {"key" : -1}} удаляет его с начала.

Иногда элемент должен быть удален на основе определенных критериев, а не своего положения в массиве. Оператор "$pull" используется для
удаления элементов массива, соответствующих заданным критериям
При использовании оператора "$pull" удаляются все совпадающие документы, а не только одно совпадение. Если у вас есть массив, который
выглядит как [1, 1, 2, 1], и вы удалите 1, то получите массив из одного эле-мента, [2].
***********************
Upsert (от англ. update (обновлять) + insert (вставить)) – особый тип обновления. Если не найден ни один документ, который соответствует фильтру,
будет создан новый документ путем объединения критериев и обновленных документов. Если совпадающий документ найден, он будет обновлен
в обычном режиме. Upsert’ы могут быть удобны, потому что могут избавить вас от необходимости «засевать» коллекцию: часто у вас может быть
один и тот же код для создания и обновления документов
***********************

***********************

***********************

***********************

***********************

***********************

